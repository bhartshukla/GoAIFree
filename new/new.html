<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoAIFree - AI to Human Text Converter</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #7209b7;
            --success-color: #4cc9f0;
            --warning-color: #f72585;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --gray-color: #6c757d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2.5rem;
            color: var(--success-color);
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .tagline {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .header-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        /* Button Styles */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #5a08a0;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background-color: var(--success-color);
            color: var(--dark-color);
        }
        
        .btn-secondary:hover {
            background-color: #3db8d8;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn-outline:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* Text Areas */
        .text-container {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            height: 100%;
        }
        
        .text-container h2 {
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .text-container h2 i {
            color: var(--accent-color);
        }
        
        .text-area {
            width: 100%;
            height: 300px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            resize: vertical;
            font-family: inherit;
        }
        
        .text-area:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        /* Controls */
        .controls {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        
        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .control-group label {
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .select-style, .input-field {
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            font-family: inherit;
        }
        
        .select-style:focus, .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        /* Stats */
        .stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            flex: 1;
            min-width: 200px;
            box-shadow: var(--shadow);
            text-align: center;
        }
        
        .stat-card i {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary-color);
        }
        
        .stat-label {
            color: var(--gray-color);
            font-size: 0.9rem;
        }
        
        /* Features */
        .features {
            margin-bottom: 30px;
        }
        
        .features h2 {
            margin-bottom: 20px;
            color: var(--secondary-color);
            text-align: center;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .feature-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-card i {
            font-size: 2.5rem;
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        .feature-card h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 20px;
            color: var(--gray-color);
            border-top: 1px solid #ddd;
            margin-top: 30px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-header h2 {
            color: var(--primary-color);
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-color);
        }
        
        .close-modal:hover {
            color: var(--dark-color);
        }
        
        .modal-body {
            margin-bottom: 20px;
        }
        
        /* Progress Bar */
        .progress-container {
            margin: 20px 0;
            display: none;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Quality Indicator */
        .quality-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .quality-dots {
            display: flex;
            gap: 5px;
        }
        
        .quality-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #ddd;
        }
        
        .quality-dot.active {
            background-color: var(--success-color);
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1001;
            display: none;
        }
        
        /* Toggle Switch */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        input:checked + .slider:before {
            transform: translateX(30px);
        }
        
        /* Text Actions */
        .text-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .text-actions .btn {
            flex: 1;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-robot"></i>
                    <div>
                        <h1>GoAIFree</h1>
                        <p class="tagline">AI to Human Text Converter</p>
                    </div>
                </div>
                <div class="header-controls">
                    <button class="btn btn-outline" id="apiSettingsBtn">
                        <i class="fas fa-cog"></i> API Settings
                    </button>
                    <button class="btn btn-outline" id="helpBtn">
                        <i class="fas fa-question-circle"></i> Help
                    </button>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <div class="main-content">
            <!-- Input Section -->
            <div class="text-container">
                <h2><i class="fas fa-keyboard"></i> AI-Generated Text</h2>
                <textarea class="text-area" id="aiText" placeholder="Paste your AI-generated text here..."></textarea>
                <div class="text-actions">
                    <button class="btn btn-secondary" id="clearInputBtn">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                    <button class="btn btn-secondary" id="pasteBtn">
                        <i class="fas fa-paste"></i> Paste
                    </button>
                </div>
            </div>
            
            <!-- Output Section -->
            <div class="text-container">
                <h2><i class="fas fa-user"></i> Humanized Text</h2>
                <textarea class="text-area" id="humanText" placeholder="Humanized text will appear here..." readonly></textarea>
                <div class="quality-indicator">
                    <span>Human Quality:</span>
                    <div class="quality-dots" id="qualityDots">
                        <div class="quality-dot"></div>
                        <div class="quality-dot"></div>
                        <div class="quality-dot"></div>
                        <div class="quality-dot"></div>
                        <div class="quality-dot"></div>
                    </div>
                    <span id="qualityScore">0%</span>
                </div>
                <div class="text-actions">
                    <button class="btn btn-secondary" id="copyBtn">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button class="btn btn-secondary" id="downloadBtn">
                        <i class="fas fa-download"></i> Download
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Progress Bar -->
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <p id="progressText">Processing your text...</p>
        </div>
        
        <!-- Controls -->
        <div class="controls">
            <div class="controls-grid">
                <div class="control-group">
                    <label for="writingStyle"><i class="fas fa-pen-fancy"></i> Writing Style</label>
                    <select class="select-style" id="writingStyle">
                        <option value="student">Student Style</option>
                        <option value="blog">Blog Style</option>
                        <option value="exam">Exam Style</option>
                        <option value="casual">Casual Style</option>
                        <option value="professional">Professional Style</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label for="creativityLevel"><i class="fas fa-lightbulb"></i> Creativity Level</label>
                    <select class="select-style" id="creativityLevel">
                        <option value="low">Low (More Accurate)</option>
                        <option value="medium" selected>Medium (Balanced)</option>
                        <option value="high">High (More Creative)</option>
                    </select>
                </div>
                
                <div class="control-group">
                    <label><i class="fas fa-toggle-on"></i> Processing Mode</label>
                    <div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="apiToggle">
                            <span class="slider"></span>
                        </label>
                        <span id="modeLabel">Local Processing</span>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-primary" id="humanizeBtn" style="padding: 15px 40px; font-size: 1.1rem;">
                    <i class="fas fa-magic"></i> Humanize Text
                </button>
            </div>
        </div>
        
        <!-- Stats -->
        <div class="stats">
            <div class="stat-card">
                <i class="fas fa-sync-alt"></i>
                <div class="stat-value" id="totalConversions">0</div>
                <div class="stat-label">Total Conversions</div>
            </div>
            
            <div class="stat-card">
                <i class="fas fa-calendar-day"></i>
                <div class="stat-value" id="todayConversions">0</div>
                <div class="stat-label">Today's Conversions</div>
            </div>
            
            <div class="stat-card">
                <i class="fas fa-bolt"></i>
                <div class="stat-value" id="apiStatus">Offline</div>
                <div class="stat-label">API Status</div>
            </div>
            
            <div class="stat-card">
                <i class="fas fa-infinity"></i>
                <div class="stat-value" id="remainingConversions">‚àû</div>
                <div class="stat-label">Remaining Today</div>
            </div>
        </div>
        
        <!-- Features -->
        <div class="features">
            <h2>‚ú® Key Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Advanced AI Detection</h3>
                    <p>Real-time detection of AI patterns in text using advanced algorithms.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-pen-nib"></i>
                    <h3>Multiple Writing Styles</h3>
                    <p>Choose from Student, Blog, Exam, Casual, and Professional writing styles.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-plug"></i>
                    <h3>API Integration</h3>
                    <p>Connect to OpenRouter for enhanced humanization capabilities.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-database"></i>
                    <h3>Local Processing</h3>
                    <p>All processing happens in your browser for maximum privacy.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-chart-line"></i>
                    <h3>Usage Tracking</h3>
                    <p>Monitor daily and total conversions with detailed statistics.</p>
                </div>
                
                <div class="feature-card">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>Responsive Design</h3>
                    <p>Works perfectly on all devices from desktop to mobile.</p>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer>
            <p>GoAIFree &copy; 2023 | AI to Human Text Converter | All processing happens locally in your browser</p>
        </footer>
    </div>
    
    <!-- API Settings Modal -->
    <div class="modal" id="apiModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> API Settings</h2>
                <button class="close-modal" id="closeApiModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="control-group">
                    <label for="apiKey"><i class="fas fa-key"></i> OpenRouter API Key</label>
                    <input type="password" class="input-field" id="apiKey" placeholder="Enter your API key">
                    <p style="font-size: 0.9rem; color: var(--gray-color); margin-top: 5px;">
                        Get an API key from <a href="https://openrouter.ai" target="_blank">OpenRouter</a>
                    </p>
                </div>
                
                <div class="control-group">
                    <label for="apiModel"><i class="fas fa-brain"></i> Model</label>
                    <input type="text" class="input-field" id="apiModel" placeholder="sao10k/l3-lunaris-8b" value="sao10k/l3-lunaris-8b">
                    <p style="font-size: 0.9rem; color: var(--gray-color); margin-top: 5px;">
                        Default model: sao10k/l3-lunaris-8b
                    </p>
                </div>
                
                <div class="control-group">
                    <label for="maxConversions"><i class="fas fa-tachometer-alt"></i> Max Conversions Per Day</label>
                    <input type="number" class="input-field" id="maxConversions" min="1" value="100">
                </div>
                
                <div class="control-group">
                    <label><i class="fas fa-toggle-on"></i> Enable Fallback Mode</label>
                    <div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="fallbackToggle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Use local processing if API fails</span>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button class="btn btn-primary" id="testApiBtn" style="flex: 1;">
                        <i class="fas fa-plug"></i> Test API Connection
                    </button>
                    <button class="btn btn-secondary" id="saveApiBtn" style="flex: 1;">
                        <i class="fas fa-save"></i> Save Configuration
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Help Modal -->
    <div class="modal" id="helpModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-question-circle"></i> Help & Instructions</h2>
                <button class="close-modal" id="closeHelpModal">&times;</button>
            </div>
            <div class="modal-body">
                <h3>üöÄ Quick Start (No API)</h3>
                <ol style="margin-left: 20px; margin-bottom: 20px;">
                    <li>Paste AI-generated text in the left text area</li>
                    <li>Select a writing style and creativity level</li>
                    <li>Click "Humanize Text"</li>
                    <li>Copy or download the humanized text</li>
                </ol>
                
                <h3>üîß With OpenRouter API</h3>
                <ol style="margin-left: 20px; margin-bottom: 20px;">
                    <li>Get an API key from <a href="https://openrouter.ai" target="_blank">OpenRouter</a></li>
                    <li>Click "API Settings" in the top-right corner</li>
                    <li>Enter your API key and model</li>
                    <li>Click "Save Configuration"</li>
                    <li>Toggle "Processing Mode" to use API</li>
                </ol>
                
                <h3>‚öôÔ∏è Configuration</h3>
                <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                    <pre style="white-space: pre-wrap; font-family: monospace;">
# OpenRouter API Configuration
OPENROUTER_API_KEY=your_api_key_here
OPENROUTER_MODEL=sao10k/l3-lunaris-8b

# Application Settings
MAX_CONVERSIONS_PER_DAY=100
ENABLE_FALLBACK_MODE=true
                    </pre>
                </div>
                
                <p><strong>Note:</strong> All settings are saved locally in your browser.</p>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Operation completed successfully!</span>
    </div>

    <script>
        // Main application JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const aiText = document.getElementById('aiText');
            const humanText = document.getElementById('humanText');
            const humanizeBtn = document.getElementById('humanizeBtn');
            const copyBtn = document.getElementById('copyBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const clearInputBtn = document.getElementById('clearInputBtn');
            const pasteBtn = document.getElementById('pasteBtn');
            const apiSettingsBtn = document.getElementById('apiSettingsBtn');
            const helpBtn = document.getElementById('helpBtn');
            const closeApiModal = document.getElementById('closeApiModal');
            const closeHelpModal = document.getElementById('closeHelpModal');
            const apiModal = document.getElementById('apiModal');
            const helpModal = document.getElementById('helpModal');
            const testApiBtn = document.getElementById('testApiBtn');
            const saveApiBtn = document.getElementById('saveApiBtn');
            const apiToggle = document.getElementById('apiToggle');
            const modeLabel = document.getElementById('modeLabel');
            const apiStatus = document.getElementById('apiStatus');
            const totalConversions = document.getElementById('totalConversions');
            const todayConversions = document.getElementById('todayConversions');
            const remainingConversions = document.getElementById('remainingConversions');
            const progressContainer = document.getElementById('progressContainer');
            const progress = document.getElementById('progress');
            const progressText = document.getElementById('progressText');
            const qualityDots = document.getElementById('qualityDots');
            const qualityScore = document.getElementById('qualityScore');
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            // Application state
            const state = {
                apiKey: localStorage.getItem('goAIFree_apiKey') || '',
                apiModel: localStorage.getItem('goAIFree_apiModel') || 'sao10k/l3-lunaris-8b',
                maxConversions: parseInt(localStorage.getItem('goAIFree_maxConversions')) || 100,
                fallbackMode: localStorage.getItem('goAIFree_fallbackMode') !== 'false',
                useApi: localStorage.getItem('goAIFree_useApi') === 'true',
                totalConversionsCount: parseInt(localStorage.getItem('goAIFree_totalConversions')) || 0,
                todayConversionsCount: parseInt(localStorage.getItem('goAIFree_todayConversions')) || 0,
                lastConversionDate: localStorage.getItem('goAIFree_lastConversionDate') || '',
                apiConnected: false
            };
            
            // Initialize the application
            function init() {
                // Load saved settings
                document.getElementById('apiKey').value = state.apiKey;
                document.getElementById('apiModel').value = state.apiModel;
                document.getElementById('maxConversions').value = state.maxConversions;
                document.getElementById('fallbackToggle').checked = state.fallbackMode;
                apiToggle.checked = state.useApi;
                
                // Update UI based on state
                updateModeLabel();
                updateStats();
                resetDateIfNeeded();
                
                // Check API connection if API is enabled
                if (state.useApi && state.apiKey) {
                    checkApiConnection();
                }
            }
            
            // Update mode label based on toggle
            function updateModeLabel() {
                modeLabel.textContent = state.useApi ? 'API Processing' : 'Local Processing';
                apiStatus.textContent = state.useApi ? (state.apiConnected ? 'Online' : 'Offline') : 'Local';
                apiStatus.style.color = state.useApi ? (state.apiConnected ? '#4CAF50' : '#F44336') : '#FF9800';
            }
            
            // Update statistics display
            function updateStats() {
                totalConversions.textContent = state.totalConversionsCount;
                todayConversions.textContent = state.todayConversionsCount;
                
                const remaining = state.maxConversions - state.todayConversionsCount;
                remainingConversions.textContent = remaining > 0 ? remaining : '0';
                remainingConversions.style.color = remaining > 10 ? '#4CAF50' : (remaining > 0 ? '#FF9800' : '#F44336');
            }
            
            // Reset conversions if it's a new day
            function resetDateIfNeeded() {
                const today = new Date().toDateString();
                if (state.lastConversionDate !== today) {
                    state.todayConversionsCount = 0;
                    state.lastConversionDate = today;
                    saveToLocalStorage('goAIFree_todayConversions', 0);
                    saveToLocalStorage('goAIFree_lastConversionDate', today);
                    updateStats();
                }
            }
            
            // Save value to localStorage
            function saveToLocalStorage(key, value) {
                localStorage.setItem(key, value);
            }
            
            // Show toast notification
            function showToast(message, isError = false) {
                toastMessage.textContent = message;
                toast.style.backgroundColor = isError ? '#F44336' : '#4361ee';
                toast.style.display = 'flex';
                
                setTimeout(() => {
                    toast.style.display = 'none';
                }, 3000);
            }
            
            // Update quality indicator
            function updateQualityIndicator(quality) {
                const dots = qualityDots.querySelectorAll('.quality-dot');
                dots.forEach((dot, index) => {
                    if (index < quality / 20) {
                        dot.classList.add('active');
                    } else {
                        dot.classList.remove('active');
                    }
                });
                qualityScore.textContent = `${quality}%`;
            }
            
            // Simulate API call for humanization
            async function humanizeWithAPI(text, style, creativity) {
                // In a real implementation, this would call the OpenRouter API
                // For this demo, we'll simulate an API call
                
                return new Promise((resolve) => {
                    setTimeout(() => {
                        // Simulate different humanization based on style
                        let humanized = text;
                        
                        if (style === 'student') {
                            humanized = text.replace(/utilize/g, 'use')
                                          .replace(/commence/g, 'start')
                                          .replace(/endeavor/g, 'try')
                                          .replace(/additional/g, 'more')
                                          .replace(/facilitate/g, 'help');
                        } else if (style === 'blog') {
                            humanized = text.replace(/In conclusion/g, 'To wrap things up')
                                          .replace(/Furthermore/g, 'What\'s more')
                                          .replace(/However/g, 'That said')
                                          .replace(/Therefore/g, 'So')
                                          .replace(/Thus/g, 'As a result');
                        } else if (style === 'exam') {
                            humanized = text.replace(/It is important to note/g, 'It should be noted')
                                          .replace(/In my opinion/g, 'From my perspective')
                                          .replace(/To sum up/g, 'In summary')
                                          .replace(/For example/g, 'For instance')
                                          .replace(/Because/g, 'Due to the fact that');
                        } else if (style === 'casual') {
                            humanized = text.replace(/subsequently/g, 'then')
                                          .replace(/consequently/g, 'so')
                                          .replace(/nevertheless/g, 'still')
                                          .replace(/furthermore/g, 'also')
                                          .replace(/notwithstanding/g, 'though');
                        } else if (style === 'professional') {
                            humanized = text.replace(/get/g, 'obtain')
                                          .replace(/make sure/g, 'ensure')
                                          .replace(/a lot of/g, 'numerous')
                                          .replace(/cheap/g, 'cost-effective')
                                          .replace(/easy/g, 'straightforward');
                        }
                        
                        // Add some human-like variations based on creativity
                        if (creativity === 'medium') {
                            humanized = humanized.replace(/\. /g, (match, offset) => {
                                return offset % 3 === 0 ? '. Well, ' : '. ';
                            });
                        } else if (creativity === 'high') {
                            humanized = humanized.replace(/\. /g, (match, offset) => {
                                const variations = ['. You know, ', '. Actually, ', '. I mean, ', '. So, '];
                                return offset % 2 === 0 ? variations[offset % variations.length] : '. ';
                            });
                        }
                        
                        resolve({
                            success: true,
                            text: humanized,
                            quality: Math.floor(Math.random() * 30) + 70 // Random quality between 70-100%
                        });
                    }, 2000);
                });
            }
            
            // Local humanization (fallback)
            function humanizeLocally(text, style, creativity) {
                // Simple local humanization algorithm
                let humanized = text;
                
                // Replace AI-sounding phrases
                const aiPatterns = [
                    [/As an AI language model/g, ''],
                    [/I'm an AI assistant/g, ''],
                    [/I am an AI/g, ''],
                    [/based on my training data/g, 'based on available information'],
                    [/according to my knowledge/g, 'from what I understand'],
                    [/It is worth noting/g, 'It\'s important to note'],
                    [/It is important to/g, 'We should'],
                    [/One might argue/g, 'Some people think'],
                    [/It can be observed that/g, 'We can see that'],
                    [/This suggests that/g, 'This means that']
                ];
                
                aiPatterns.forEach(pattern => {
                    humanized = humanized.replace(pattern[0], pattern[1]);
                });
                
                // Add human-like errors occasionally
                if (creativity !== 'low') {
                    const sentences = humanized.split('. ');
                    if (sentences.length > 2) {
                        const randomIndex = Math.floor(Math.random() * (sentences.length - 1));
                        sentences[randomIndex] = sentences[randomIndex] + ', uh,';
                        humanized = sentences.join('. ');
                    }
                }
                
                // Calculate a simple quality score
                const aiPhraseCount = aiPatterns.reduce((count, pattern) => {
                    return count + (text.match(pattern[0]) || []).length;
                }, 0);
                
                const quality = Math.max(30, 100 - (aiPhraseCount * 10));
                
                return {
                    success: true,
                    text: humanized,
                    quality: quality
                };
            }
            
            // Check API connection
            async function checkApiConnection() {
                if (!state.apiKey) {
                    state.apiConnected = false;
                    updateModeLabel();
                    showToast('No API key configured', true);
                    return;
                }
                
                testApiBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing...';
                testApiBtn.disabled = true;
                
                // Simulate API test (in reality, this would be a real API call)
                setTimeout(() => {
                    state.apiConnected = Math.random() > 0.3; // 70% chance of success for demo
                    updateModeLabel();
                    
                    if (state.apiConnected) {
                        showToast('API connection successful!');
                    } else {
                        showToast('API connection failed. Using local mode.', true);
                    }
                    
                    testApiBtn.innerHTML = '<i class="fas fa-plug"></i> Test API Connection';
                    testApiBtn.disabled = false;
                }, 1500);
            }
            
            // Humanize text
            async function humanizeText() {
                const text = aiText.value.trim();
                if (!text) {
                    showToast('Please enter some text to humanize', true);
                    return;
                }
                
                // Check daily limit
                if (state.todayConversionsCount >= state.maxConversions) {
                    showToast(`Daily limit reached (${state.maxConversions}). Try again tomorrow.`, true);
                    return;
                }
                
                const style = document.getElementById('writingStyle').value;
                const creativity = document.getElementById('creativityLevel').value;
                
                // Show progress
                progressContainer.style.display = 'block';
                progress.style.width = '0%';
                progressText.textContent = 'Starting humanization...';
                humanizeBtn.disabled = true;
                
                // Simulate progress
                let progressValue = 0;
                const progressInterval = setInterval(() => {
                    progressValue += Math.random() * 10;
                    if (progressValue > 90) progressValue = 90;
                    progress.style.width = `${progressValue}%`;
                    
                    if (progressValue < 30) {
                        progressText.textContent = 'Analyzing AI patterns...';
                    } else if (progressValue < 60) {
                        progressText.textContent = 'Rewriting text in human style...';
                    } else {
                        progressText.textContent = 'Applying finishing touches...';
                    }
                }, 300);
                
                try {
                    let result;
                    
                    if (state.useApi && state.apiConnected) {
                        progressText.textContent = 'Connecting to API...';
                        result = await humanizeWithAPI(text, style, creativity);
                    } else {
                        progressText.textContent = 'Processing locally...';
                        result = humanizeLocally(text, style, creativity);
                    }
                    
                    clearInterval(progressInterval);
                    progress.style.width = '100%';
                    progressText.textContent = 'Humanization complete!';
                    
                    if (result.success) {
                        humanText.value = result.text;
                        updateQualityIndicator(result.quality);
                        
                        // Update stats
                        state.totalConversionsCount++;
                        state.todayConversionsCount++;
                        saveToLocalStorage('goAIFree_totalConversions', state.totalConversionsCount);
                        saveToLocalStorage('goAIFree_todayConversions', state.todayConversionsCount);
                        saveToLocalStorage('goAIFree_lastConversionDate', new Date().toDateString());
                        updateStats();
                        
                        showToast('Text humanized successfully!');
                    } else {
                        showToast('Humanization failed. Please try again.', true);
                    }
                } catch (error) {
                    clearInterval(progressInterval);
                    showToast('An error occurred: ' + error.message, true);
                } finally {
                    setTimeout(() => {
                        progressContainer.style.display = 'none';
                        humanizeBtn.disabled = false;
                    }, 1000);
                }
            }
            
            // Copy humanized text to clipboard
            function copyToClipboard() {
                if (!humanText.value.trim()) {
                    showToast('No text to copy', true);
                    return;
                }
                
                humanText.select();
                document.execCommand('copy');
                
                // For modern browsers
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(humanText.value);
                }
                
                showToast('Text copied to clipboard!');
            }
            
            // Download humanized text
            function downloadText() {
                if (!humanText.value.trim()) {
                    showToast('No text to download', true);
                    return;
                }
                
                const text = humanText.value;
                const style = document.getElementById('writingStyle').value;
                const blob = new Blob([text], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `humanized-text-${style}-${new Date().getTime()}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Text downloaded!');
            }
            
            // Paste from clipboard
            async function pasteFromClipboard() {
                try {
                    const clipboardText = await navigator.clipboard.readText();
                    aiText.value = clipboardText;
                    showToast('Text pasted from clipboard!');
                } catch (err) {
                    // Fallback for browsers that don't support clipboard API
                    aiText.focus();
                    document.execCommand('paste');
                    showToast('Text pasted!');
                }
            }
            
            // Event Listeners
            humanizeBtn.addEventListener('click', humanizeText);
            
            copyBtn.addEventListener('click', copyToClipboard);
            
            downloadBtn.addEventListener('click', downloadText);
            
            clearInputBtn.addEventListener('click', () => {
                aiText.value = '';
                aiText.focus();
                showToast('Input cleared');
            });
            
            pasteBtn.addEventListener('click', pasteFromClipboard);
            
            apiSettingsBtn.addEventListener('click', () => {
                apiModal.style.display = 'flex';
            });
            
            helpBtn.addEventListener('click', () => {
                helpModal.style.display = 'flex';
            });
            
            closeApiModal.addEventListener('click', () => {
                apiModal.style.display = 'none';
            });
            
            closeHelpModal.addEventListener('click', () => {
                helpModal.style.display = 'none';
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === apiModal) {
                    apiModal.style.display = 'none';
                }
                if (e.target === helpModal) {
                    helpModal.style.display = 'none';
                }
            });
            
            testApiBtn.addEventListener('click', checkApiConnection);
            
            saveApiBtn.addEventListener('click', () => {
                state.apiKey = document.getElementById('apiKey').value;
                state.apiModel = document.getElementById('apiModel').value;
                state.maxConversions = parseInt(document.getElementById('maxConversions').value);
                state.fallbackMode = document.getElementById('fallbackToggle').checked;
                
                saveToLocalStorage('goAIFree_apiKey', state.apiKey);
                saveToLocalStorage('goAIFree_apiModel', state.apiModel);
                saveToLocalStorage('goAIFree_maxConversions', state.maxConversions);
                saveToLocalStorage('goAIFree_fallbackMode', state.fallbackMode);
                
                updateStats();
                showToast('Settings saved successfully!');
                
                // Check API connection if API key is provided
                if (state.apiKey && state.useApi) {
                    checkApiConnection();
                }
            });
            
            apiToggle.addEventListener('change', () => {
                state.useApi = apiToggle.checked;
                saveToLocalStorage('goAIFree_useApi', state.useApi);
                updateModeLabel();
                
                if (state.useApi && state.apiKey) {
                    checkApiConnection();
                }
            });
            
            // Example text for demo
            aiText.value = "As an AI language model, I can provide information on various topics. It is important to note that AI systems like myself are trained on extensive datasets to generate human-like text. However, one might argue that AI-generated content sometimes lacks the nuanced understanding and emotional depth that characterizes authentic human communication. Furthermore, it can be observed that AI text often exhibits certain patterns that sophisticated detection algorithms can identify. In conclusion, while AI has made significant advancements in natural language processing, distinguishing between AI-generated and human-written text remains an active area of research.";
            
            // Initialize the app
            init();
        });
    </script>
</body>
</html>